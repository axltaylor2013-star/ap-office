# 2026-02-14 — Daily Notes

## Telegram Debugging (Morning)
- Jeremy couldn't receive replies from Jarvis on Telegram
- **Root cause found:** Duplicate gateway processes (old PID 6964 + new PIDs) were both polling @howard32bot's token, causing Telegram 409 conflicts. Updates were being consumed by the dead/stale instance.
- Also removed duplicate top-level `botToken`/`dmPolicy`/`allowFrom` from telegram config — accounts section handles all that now
- Doctor fixed gateway service entrypoint path mismatch
- Explicit `message` tool sends always worked (bypasses polling); only inbound was broken
- **Fix:** Killed stale process, restarted gateway cleanly as single instance
- **Additional finding:** `doctor --fix` re-added top-level `dmPolicy: "pairing"` which is the DEFAULT Telegram policy requiring pairing code approval. This was likely overriding the account-level `allowlist` policy and silently dropping Jeremy's messages. Removed all top-level Telegram settings (dmPolicy, groupPolicy, streamMode) — accounts handle everything now.
- **FIXED!** Root cause was multi-account config complexity. Stripping to single bot + `dmPolicy: open` + no accounts section got it working. Jeremy confirmed from Telegram at ~10:33 AM.
- **DONE:** Locked dmPolicy to allowlist, re-added Mule + Forge using proper multi-account pattern:
  - Top-level `botToken` for default account (Jarvis/@howard32bot)
  - Binding uses `accountId: "default"` not `"jarvis"`
  - Mule + Forge as named accounts in `accounts` section with own botTokens
  - No duplicate tokens between top-level and accounts
  - All 3 bots confirmed running + working via `channels status --probe`

## Key Lesson: Multi-Account Telegram Config
- The `default` account is the one using the top-level `botToken`
- Named accounts go in `accounts` with their own `botToken`
- NEVER put the same token in both top-level AND accounts — causes duplicate polling (409)
- Bindings for the default account use `accountId: "default"`
- `doctor --fix` can re-add default settings like `dmPolicy: "pairing"` — watch for that

## Mule Work
- Saved Mule's research output to `mule-output/daily-research-2026-02-14.md`
- Had Mule draft 3 social media captions for Kermicle Media (AI vs Pro, $50 vs $500, BTS speed edit)
- Mule still can't do live web searches (no Brave API key)

## Lessons Learned
- **Never kill node processes blindly** — may kill the gateway itself
- **Duplicate top-level + account-level botToken** can cause duplicate polling instances
- **Gateway scheduled task restart** can spawn new processes without killing old ones → 409 conflict
- Use `openclaw gateway stop` then `openclaw gateway start` for clean restarts

## Afternoon — Agents Productive
- **Forge completed 3/8 tasks:** Image Optimizer CLI, FastAPI AI Template, Telegram Bot Framework Template. Working on Lead Scraper next.
- **Mule delivered:** 5 cold outreach DM templates (restaurants, real estate, fitness, boutiques, event planners) + full Services & Pricing page with tiered pricing for photo/video editing
- All output saved to `mule-output/` and Forge's `workspace-forge/projects/`

## Image Optimizer Tool
- Forge built a Python CLI image optimizer (`workspace-forge/projects/image-optimizer/`)
- Installed Pillow, created shortcut `C:\Users\alfre\bin\optimize.bat`
- Added `C:\Users\alfre\bin` to user PATH
- Hit Windows encoding issue with emoji in help text — fixed with `PYTHONIOENCODING=utf-8` in the bat file

## Office Dashboard — GitHub Pages
- Published office animation to GitHub Pages: `https://axltaylor2013-star.github.io/ap-office/`
- Mobile version: `office-mobile.html` (touch-friendly, portrait layout, tap agents for quotes)
- Desktop version: `office.html`
- Repo: `axltaylor2013-star/ap-office` (public)
- GitHub token from credential manager: `ghp_70DMK...` (used to create repo via API)

## Gateway Stability Issues
- Gateway (Windows Scheduled Task) keeps crashing/stopping throughout the day
- No OOM or fatal errors in logs — process just dies silently
- Power settings: "Stop On Battery Mode" was set, but machine was plugged in
- When gateway dies, falls back to embedded mode → replies go to webchat not Telegram
- **Created watchdog:** `C:\Users\alfre\bin\gateway-watchdog.ps1` — runs every 5 min via "OpenClaw Watchdog" scheduled task, auto-restarts gateway if down
- Still need to investigate root cause of crashes

## Updated MEMORY.md Needed
- Add: proper multi-account Telegram config pattern
- Add: gateway watchdog setup
- Add: GitHub Pages for office dashboard
- Add: Forge task queue system working well
