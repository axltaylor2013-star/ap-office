# 2026-02-17 Evening — Launch Prep

## Completed: Full Remote Migration
- All 13 server scripts fixed: `Instance.new("Remote")` → `Remotes:WaitForChild()`
- Deleted `src/ReplicatedStorage/Remotes/init.server.lua` — was creating DUPLICATE Remotes folder conflicting with project.json
- Added smithing/fletching remotes to project.json (StartSmithing, SmithingProgress, SmithingComplete, StartFletching, FletchingProgress, FletchingComplete)
- **61 total remotes** now declared in project.json
- Zero `getOrCreateRemote`, zero `Instance.new("RemoteEvent")`, zero type annotations, zero `PaddingAll`
- All BOM-clean, build successful

## Final Stats
- 29 server scripts, 17 client scripts, 6 modules
- Endless gathering: already implemented (auto-loop, toggle on/off)
- Build: `build.rbxlx` ready

## Launch Status: READY FOR TESTING
- Jeremy said "get to where you think its completed and let me know"
- Game is feature-complete for first reveal
- Only thing left: DataStore (needs published place) and Jeremy's playtest

## Bug Fixes During Jeremy's Testing (~3:00-3:30 PM)
1. **Banker under floor** — body parts at wrong coordinates (legs at 19,20 while torso at 35,50). Fixed all to (35, y, 45) above bank floor. Added PrimaryPart.
2. **Bank wouldn't open** — removed duplicate counter BankManager was creating (MapSetup already had one)
3. **CraftRequest/QuestProgress/LootBagOpen remotes not found** — client scripts looking at root ReplicatedStorage instead of Remotes folder. Fixed CraftingUI, QuestUI, LootUI, XPPopup, AttackAnimations.
4. **Added missing remotes to project.json**: TradeResponse, TradeConfirm, TradeComplete, QuestProgress (was duplicate), StartSmithing/Fletching series
5. **Banker mojibake** — "ðŸ¦ Banker" corrupted emoji. Fixed to just "Banker". Had to use Node.js script because PowerShell couldn't match the encoding.
6. **Monsters leaving heads behind** — Root cause: MonsterMovementAnimations.client.lua stored ABSOLUTE world positions at init, reset parts to those positions every frame. When server moved monsters via PivotTo, client snapped heads back. **Fix**: Rewrote entire animation system to use RELATIVE CFrame offsets from body.
7. **Monster body rotation** — Changed moveModelTo() to use `model:PivotTo(newCF)` instead of manual part movement. Proper Roblox way to move entire model atomically.
8. **"PrimaryPart is not a valid member of Folder" spam** — Console warnings from code accessing .PrimaryPart on Folders. Added IsA("Model") guards in AttackAnimations and MonsterMovementAnimations.

## New Features Built (~3:30-4:15 PM)

### Crimson Warlord Boss (Lv55, 1800 HP)
- Mid-tier safe zone centerpiece boss
- 50+ part model: crimson armor, greatsword with glowing edge, spiked pauldrons, horned crown, battle cape, skull belt, ember particles, ground aura
- Located at Crimson Arena (0, 0, 250) — stone arena with 12 pillars, torches, iron fences, entrance arch
- Drops: Warlord's Greatsword (55 dmg), Crimson Platebody (35 def), Crimson Platelegs, Warlord's Helm, Warlord's Shield, Crimson Cape (legendary 8%), Blood Rune
- All drops added to ItemDatabase as Lv50 epic/legendary gear

### Wilderness Red Wall
- Low red brick wall at z=-100 (3 studs, jumpable)
- Gap with posts for path, dark trim, "WILDERNESS" sign

### Shop System Rebuild (sub-agent)
- 7 merchants with REAL items (was referencing non-existent items)
- Fixed ShopManager to use correct DataManager API (dot syntax, not colon)
- Added missing basic items: Bread, Meat Pie, Healing Potion, Fishing Bait, Rope, Tinderbox
- Added Fisher Tom + Woodsman Jake NPCs
- Buy/sell working, 60% sell-back, InventoryUpdate fires after transactions

### The Dark Fortress (Wilderness Castle)
- Massive PvP castle at (0, 0, -350)
- Lava moat (4 segments) + drawbridge
- 80-stud outer walls, 20 studs high, crenellations + walkways
- 4 corner towers (30 studs) with roofs + torches
- Inner keep with throne room (capture point)
- Staircases to wall walkways, banners, weapon racks, courtyard torches
- "PVP ZONE" warning sign

### PvP System (sub-agent)
- PvPManager.server.lua + PvPUI.client.lua
- Wilderness detection (z < -100)
- Click-to-attack other players in wilderness
- Skull system: attack first = skulled 5 min = drop ALL on death
- Unskulled: keep 3 most valuable items
- 50% gold loss on PvP death
- Ground loot drops at death location
- Wilderness level display (deeper = higher level)
- Kill/death notifications
- New remotes: PvPAttack, PvPDeath, SkullUpdate, WildernessWarning

### PvP/Combat Research Report
- 21K word report at docs/pvp-combat-research.md
- Covers: attack animations (Motor6D + TweenService), PvP systems (Deepwoken analysis), castle siege mechanics, combat juice

## Current Script Count
- 30 server scripts, 18 client scripts, 6 modules
- ~70+ remotes in project.json

## Jeremy's Next Requests (queued)
- Enhanced attack animations (combo chains, special attacks)
- Focus on PvP side of game
- "you have 2 hours" — deadline ~6:15 PM EST

## Key Lessons
- `model:PivotTo(newCF)` is the correct way to move entire models in Roblox — moves ALL descendants atomically
- Client animation scripts must use RELATIVE offsets (CFrame from body), never absolute world positions
- ShopManager was using wrong DataManager API (`DataManager:GetPlayerData()` vs `DataManager.GetData()`)
- Always check that shop items actually exist in ItemDatabase before referencing them

## Late Night Session (~10PM+)
- Built Crimson Warlord boss (Lv55, 1800HP) + full stone arena at (0,0,250)
- Added 7 Warlord items to ItemDatabase (Greatsword, Crimson armor set, Cape, Blood Rune)
- Fixed monster body rotation — rewrote moveModelTo/teleportModel to use model:PivotTo()
- Fixed monster head detachment — switched to relative CFrame offsets from body
- Added wilderness barrier wall at z=-100 (red brick, 3 studs, gap with posts, "WILDERNESS" sign)
- Fixed PrimaryPart on Folder warnings in AttackAnimations + MonsterMovementAnimations
- NPC shop inventory reconciliation still TODO — shops reference many nonexistent items
- Game deployed for Jeremy's morning playtest — "First Reveal Standard" feature-complete
- Boss level spread finalized: King Rooster 20 → Elder Treant 35 → Iron Golem 50 → Crimson Warlord 55 → Frost Wyrm 60 → Lake Serpent 65 → Corrupted Guardian 80 → Lich King 90 → Shadow Dragon 100
